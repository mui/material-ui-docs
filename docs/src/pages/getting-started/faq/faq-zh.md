# å¸¸è§é—®é¢˜è§£ç­”

<p class="description">æ‚¨åœ¨ä¸€ä¸ªç‰¹å®šçš„é—®é¢˜ä¸Šåœæ»ä¸å‰å—ï¼Ÿ æ‚¨å¯ä»¥å…ˆåœ¨å¸¸è§ FAQï¼ˆé—®é¢˜è§£ç­”ï¼‰ä¸­æ£€ç´¢ä¸€ä¸‹å¸¸è§é—®é¢˜ã€‚</p>

å¦‚æœä»ç„¶æ‰¾ä¸åˆ°æ‰€éœ€çš„å†…å®¹ï¼Œæ‚¨å¯ä»¥å‚è€ƒæˆ‘ä»¬çš„ [æ”¯æŒé¡µé¢](/getting-started/support/) ã€‚

## Material-UI è¶…èµã€‚ æˆ‘è¯¥å¦‚ä½•æ”¯æŒè¯¥é¡¹ç›®ï¼Ÿ

å…¶å®æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥æ”¯æŒ Material-UIï¼š

- **å£å£ç›¸ä¼ **ã€‚ é€šè¿‡åœ¨æ‚¨çš„ç½‘ç«™ä¸Š [é“¾æ¥åˆ° material-ui.com](https://material-ui.com/) æ¥ä¼ æ’­ Material-UI ï¼Œæ¯ä¸ªåå‘é“¾æ¥å¯¹æˆ‘ä»¬æ¥è¯´éƒ½å¾ˆé‡è¦ã€‚ åœ¨ [Twitter ä¸Šå…³æ³¨æˆ‘ä»¬](https://twitter.com/MaterialUI) ï¼Œç‚¹èµå¹¶è½¬å‘ä¸€äº›é‡è¦çš„æ–°é—»ã€‚ æˆ–è€…åªæ˜¯ä¸æ‚¨çš„æœ‹å‹è°ˆè®ºæˆ‘ä»¬ã€‚
- **ç»™æˆ‘ä»¬åé¦ˆ** ã€‚ å‘Šè¯‰æˆ‘ä»¬ä¸€äº›åšå¾—å¥½çš„åœ°æ–¹æˆ–è€…å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ã€‚ è¯·ç»™æ‚¨æœ€å¸Œæœ›çœ‹åˆ°èƒ½å¤Ÿè§£å†³çš„é—®é¢˜æŠ•ç¥¨ï¼ˆğŸ‘ï¼‰ã€‚
- **å¸®åŠ©æ–°çš„ç”¨æˆ·** ã€‚ æ‚¨å¯ä»¥åœ¨ [StackOverflow](https://stackoverflow.com/questions/tagged/material-ui) ä¸­å›ç­”ä¸€äº›é—®é¢˜ã€‚
- **åšå‡ºä¸€äº›æ”¹å˜å§**ã€‚ 
  - ç¼–è¾‘æ–‡æ¡£ã€‚ æ¯ä¸ªé¡µé¢å³ä¸Šè§’éƒ½æœ‰ä¸€ä¸ªâ€œç¼–è¾‘æ­¤é¡µé¢â€çš„é“¾æ¥ã€‚
  - é€šè¿‡ [åˆ›å»ºä¸€ä¸ªé—®é¢˜](https://github.com/mui-org/material-ui/issues/new) æ¥æŠ¥å‘Šé”™è¯¯æˆ–ç¼ºå°‘çš„åŠŸèƒ½ ã€‚
  - æŸ¥çœ‹å’Œè¯„è®ºä¸€äº›ç°æœ‰çš„ [pull requests](https://github.com/mui-org/material-ui/pulls) å’Œ [issues](https://github.com/mui-org/material-ui/issues)ã€‚
  - å¸®åŠ©æˆ‘ä»¬ [ç¿»è¯‘](https://translate.material-ui.com) æ–‡æ¡£ã€‚
  - é€šè¿‡ [æäº¤çš„ä¸€ä¸ª pull request](https://github.com/mui-org/material-ui/pulls) æ¥ [ä¼˜åŒ–æˆ‘ä»¬çš„æ–‡æ¡£](https://github.com/mui-org/material-ui/tree/master/docs)ï¼Œä¿®å¤é”™è¯¯ï¼Œæˆ–è€…æ·»åŠ åŠŸèƒ½ã€‚
- **åœ¨ [OpenCollective](https://opencollective.com/material-ui)** ä¸Šèµ„åŠ©æˆ‘ä»¬ã€‚ å¦‚æœæ‚¨åœ¨å•†ä¸šé¡¹ç›®ä¸­ä½¿ç”¨äº† Material-UIï¼Œå¹¶å¸Œæœ›é€šè¿‡æˆä¸ºæˆ‘ä»¬çš„èµåŠ©å•†æ¥æ”¯æŒæˆ‘ä»¬çš„æŒç»­å‘å±•ï¼Œæˆ–è€…åœ¨ä¸€ä¸ªä¸šä½™çš„æˆ–è€…çˆ±å¥½çš„é¡¹ç›®ä¸­ä½¿ç”¨äº†ï¼Œå¹¶æƒ³æˆä¸ºæˆ‘ä»¬çš„ä¸€ä¸ªæ”¯æŒè€…ï¼Œ æ‚¨éƒ½å¯ä»¥é€šè¿‡ OpenCollective æ¥èµ„åŠ©æˆ‘ä»¬ã€‚ ç­¹é›†çš„æ‰€æœ‰èµ„é‡‘éƒ½æ˜¯é€æ˜ç®¡ç†çš„ï¼ŒèµåŠ©å•†åœ¨ README å’Œ Material-UI ä¸»é¡µä¸Šéƒ½ä¼šè·å¾—è®¤å¯ã€‚

## ä¸ºä»€ä¹ˆæˆ‘çš„ç»„ä»¶åœ¨ç”Ÿäº§æ„é€ ä¸­æ²¡æœ‰æ­£ç¡®åœ°æ¸²æŸ“ï¼Ÿ

å‘ç”Ÿè¿™ç§æƒ…å†µçš„é¦–è¦åŸå› ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯æ‚¨çš„ä»£ç åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„æ†ç»‘åŒ…ä¸­å‡ºç°äº†ç±»åå†²çªã€‚ å¦‚æœæƒ³è¦ Material-UI æ­£å¸¸å·¥ä½œï¼Œé¡µé¢ä¸Šæ‰€æœ‰ç»„ä»¶çš„ `classname` å€¼å¿…é¡»ç”±å•ä¸ªå®ä¾‹çš„ [ç±»åç§°ç”Ÿæˆå™¨](/styles/advanced/#class-names) ç”Ÿæˆã€‚

è¦çº æ­£è¿™ä¸ªé—®é¢˜ï¼Œæ‚¨éœ€è¦å¯¹é¡µé¢ä¸Šçš„æ‰€æœ‰ç»„ä»¶è¿›è¡Œåˆå§‹åŒ–ï¼Œä½¿å®ƒä»¬ä¹‹é—´æ°¸è¿œåªæœ‰**ä¸€ä¸ªç±»åç”Ÿæˆå™¨**ã€‚

åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½æœ€ç»ˆä¼šæ„å¤–åœ°ä½¿ç”¨ä¸¤ä¸ªç±»åç”Ÿæˆå™¨ï¼š

- æ¯”å¦‚ä½ ä¸€ä¸å°å¿ƒ **æ‰“åŒ…**äº† ä¸¤ä¸ªç‰ˆæœ¬çš„ Material-UIã€‚ ä½ å¯èƒ½é”™è¯¯åœ°å°†ä¸€ä¸ªä¾èµ–å’Œ material-ui è®¾ç½®ä¸ºåŒç‰ˆæœ¬ä¾èµ–äº†ã€‚
- You are using `StylesProvider` for a **subset** of your React tree.
- æ‚¨æ­£åœ¨ä½¿ç”¨æ‰“åŒ…çš„ä»£ç åˆ†å‰²åŠŸèƒ½ï¼Œè¿™ä¼šç”Ÿæˆå¤šä¸ª class åå­—

> å¦‚æœä½ æ­£ä½¿ç”¨çš„ webpack å¸¦æœ‰ [SplitChunksPlugin](https://webpack.js.org/plugins/split-chunks-plugin/) æ’ä»¶ ï¼Œè¯·å°è¯•åœ¨è®¾ç½®é‡Œçš„ [`optimizations` ä¸‹é…ç½® `runtimeChunk`](https://webpack.js.org/configuration/optimization/#optimization-runtimechunk) ã€‚

æ€»çš„æ¥è¯´ï¼Œæ‚¨åªéœ€è¦åœ¨æ¯ä¸ª Material-UI åº”ç”¨ç¨‹åºçš„ç»„ä»¶æ ‘é¡¶éƒ¨ä½¿ç”¨ [`StylesProvider`](/styles/api/#stylesprovider) ç»„ä»¶è¿›è¡ŒåŒ…è£…ï¼Œ**å¹¶åœ¨å®ƒä»¬ä¹‹é—´å…±äº«ä¸€ä¸ªå•ä¸€çš„ç±»åç”Ÿæˆå™¨**ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

## ä¸ºä»€ä¹ˆå½“æ‰“å¼€Modalï¼ˆæ¨¡æ€æ¡†ï¼‰æ—¶ï¼Œfixed positionedï¼ˆä½ç½®å›ºå®šçš„ï¼‰å…ƒç´ ä¼šç§»åŠ¨ï¼Ÿ

å½“Modalï¼ˆæ¨¡æ€æ¡†ï¼‰æ‰“å¼€æ—¶ï¼Œæ»šåŠ¨ä¼šè¢«ç¦æ­¢ã€‚ è¿™æ ·å°±èƒ½å¤Ÿé˜»æ­¢ç”¨æˆ·ä¸ä¸‹å±‚èƒŒæ™¯å†…å®¹è¿›è¡Œäº¤äº’ä»¥ç¡®ä¿æ¨¡æ€æ¡†åº”è¯¥æ˜¯å”¯ä¸€çš„äº¤äº’å†…å®¹ã€‚ ç„¶è€Œï¼Œç§»é™¤æ»šåŠ¨æ¡ä¼šä½¿æ‚¨çš„**å›ºå®šå®šä½çš„å…ƒç´ **ç§»åŠ¨ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥åº”ç”¨å…¨å±€ `.mui-fixed` ç±»æ¥é€šçŸ¥ Material-UI å¤„ç†è¿™äº›å…ƒç´ ã€‚

## å¦‚ä½•åœ¨å…¨å±€ç¦ç”¨ ripple effectï¼ˆæ¶Ÿæ¼ªæ•ˆæœï¼‰ï¼Ÿ

æ¶Ÿæ¼ªæ•ˆæœå®Œå…¨æ¥è‡ª` BaseButton `é›¶ä»¶ã€‚ æ‚¨å¯ä»¥é€šè¿‡åœ¨æ‚¨çš„ä¸»é¢˜ä¸­æä¾›ä»¥ä¸‹å†…å®¹ï¼Œæ¥å…¨å±€åœ°ç¦ç”¨æ¶Ÿæ¼ªæ•ˆæœï¼š

```js
import { createMuiTheme } from '@material-ui/core';

const theme = createMuiTheme({
  props: {
    // Name of the component âš›ï¸
    MuiButtonBase: {
      // The properties to apply
      disableRipple: true, // No more ripple, on the whole application ğŸ’£!
    },
  },
});
```

## å¦‚ä½•ç¦ç”¨å…¨å±€è¿‡æ¸¡ï¼Ÿ

Material-UI ä½¿ç”¨ç›¸åŒçš„ä¸»é¢˜åŠ©æ‰‹æ¥åˆ›å»ºæ‰€æœ‰çš„è¿‡æ¸¡ã€‚ å› æ­¤ï¼Œæ‚¨å¯ä»¥é€šè¿‡è¦†ç›–ä¸»é¢˜åŠ©æ‰‹æ¥ç¦ç”¨æ‰€æœ‰çš„è¿‡æ¸¡ï¼š

```js
import { createMuiTheme } from '@material-ui/core';

const theme = createMuiTheme({
  transitions: {
    // è¿™æ ·å°±å¾—åˆ°äº†å…¨å±€çš„ `transition: none;`
    create: () => 'none',
  },
});
```

åœ¨è§†è§‰æµ‹è¯•è¿‡ç¨‹ä¸­ç¦ç”¨è¿‡æ¸¡ï¼Œæˆ–è€…åœ¨ä½ç«¯è®¾å¤‡ä¸Šæé«˜æ€§èƒ½ï¼Œè¿™æ ·åšéƒ½æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚

æ‚¨å¯ä»¥æ›´è¿›ä¸€æ­¥åœ°ç¦ç”¨æ‰€æœ‰çš„è¿‡æ¸¡å’ŒåŠ¨ç”»æ•ˆæœã€‚

```js
import { createMuiTheme } from '@material-ui/core';

const theme = createMuiTheme({
  overrides: {
    // ç»„ä»¶åç§° âš›ï¸
    MuiCssBaseline: {
      // è§„åˆ™åç§°
      '@global': {
        '*, *::before, *::after': {
          transition: 'none !important',
          animation: 'none !important',
        },
      },
    },
  },
});
```

è¯·æ³¨æ„ï¼Œä¸Šè¿°æ–¹æ³•éœ€è¦ä½¿ç”¨ `CssBaseline`ã€‚ å¦‚æœæ‚¨é€‰æ‹©ä¸ä½¿ç”¨å®ƒï¼Œæ‚¨ä»ç„¶å¯ä»¥é€šè¿‡åŠ å…¥è¿™äº› CSS è§„åˆ™æ¥ç¦ç”¨è¿‡æ¸¡å’ŒåŠ¨ç”»ï¼š

```css
*, *::before, *::after {
  transition: 'none !important';
  animation: 'none !important';
}
```

## æˆ‘æ˜¯å¦å¿…é¡»ä½¿ç”¨ JSS ç»™ app æ¥è®¾ç½®æ ·å¼å‘¢ï¼Ÿ

ä¸ç”¨çš„ï¼ŒJSS ä¸æ˜¯ä¸€ä¸ªå¿…é¡»é€‰æ‹©ã€‚ But this dependency comes built in, so carries no additional bundle size overhead.

ç„¶è€Œï¼Œä¹Ÿè®¸æ‚¨æ­£åœ¨ä¸ºä¸€ä¸ªå·²ç»ä½¿ç”¨å…¶ä»–æ ·å¼è§£å†³æ–¹æ¡ˆçš„åº”ç”¨ç¨‹åºæ·»åŠ ä¸€äº› Material-UI ç»„ä»¶ï¼Œæˆ–è€…å·²ç»lç†Ÿæ‚‰äº†ä¸åŒçš„ APIï¼Œè€Œä¸æƒ³å­¦ä¹ æ–°çš„ APIï¼Ÿ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·è®¿é—® [æ ·å¼åº“äº’ç”¨](/guides/interoperability/) éƒ¨åˆ†ï¼Œåœ¨é‚£é‡Œæˆ‘ä»¬å±•ç¤ºäº†ä½¿ç”¨æ›¿ä»£æ ·å¼åº“æ¥é‡æ–°è®¾ç½® Material-UI ç»„ä»¶çš„æ ·å¼æ˜¯å¤šä¹ˆç®€å•ã€‚

## å†…è”æ ·å¼ä¸ CSS ä¹‹é—´æˆ‘åº”è¯¥æ€ä¹ˆé€‰æ‹©ä½¿ç”¨çš„æ—¶æœºï¼Ÿ

æ ¹æ®ç»éªŒï¼Œä»…å¯¹åŠ¨æ€æ ·å¼å±æ€§ä½¿ç”¨å†…è”æ ·å¼ã€‚ CSS æ›¿ä»£æ–¹æ¡ˆä¹Ÿæœ‰æ›´å¤šä¼˜åŠ¿ï¼Œä¾‹å¦‚ï¼š

- è‡ªåŠ¨å‰ç¼€
- æ›´å¥½åœ°è°ƒè¯•
- åª’ä½“æŸ¥è¯¢
- å…³é”®å¸§

## æˆ‘åº”è¯¥æ€ä¹ˆä½¿ç”¨ react-routerï¼Ÿ

åœ¨æˆ‘ä»¬çš„æŒ‡å—ä¸­è¯¦ç»†ä»‹ç»äº†ä¸ react-routerã€Gatsby æˆ– Next.js ç­‰ [ç¬¬ä¸‰æ–¹è·¯ç”±åº“](/guides/composition/#routing-libraries) çš„é›†æˆã€‚

## æˆ‘åº”è¯¥æ€ä¹ˆè®¿é—® DOM å…ƒç´ ï¼Ÿ

æ‰€æœ‰åº”è¯¥åœ¨ DOM ä¸­æ¸²æŸ“å†…å®¹çš„ Material-UI ç»„ä»¶éƒ½ä¼šéƒ½å°†å…¶ ref è½¬å‘ç»™åº•å±‚çš„ DOM ç»„ä»¶ã€‚ è¿™æ„å‘³ç€æ‚¨å¯ä»¥é€šè¿‡è¯»å–é™„åŠ åœ¨ Material-UI ç»„ä»¶ä¸Šçš„ ref æ¥è·å– DOM å…ƒç´ ã€‚ 

```jsx
// æˆ–è€…ä¸ºä¸€ä¸ª ref setter å‡½æ•°
const ref = React.createRef();
// æ¸²æŸ“
<Button ref={ref} />;
// ä½¿ç”¨
const element = ref.current;
```

å¦‚æœæ‚¨å¯¹ç›¸å…³ Material-UI ç»„ä»¶æ˜¯å¦è½¬å‘äº†å®ƒçš„ ref å­˜åœ¨ç–‘é—®çš„æ—¶å€™ï¼Œä½ å¯ä»¥æŸ¥çœ‹â€œPropsâ€ä¸‹çš„ API æ–‡æ¡£ï¼Œä¾‹å¦‚ [Button API](/api/button/#props)

> ref ä¼šè¢«è½¬å‘åˆ°æ ¹å…ƒç´ ã€‚

è¿™å°±è¡¨æ˜æ‚¨å¯ä»¥ä½¿ç”¨ ref æ¥è®¿é—®è¿™ä¸ª DOM å…ƒç´ ã€‚

## æˆ‘çš„é¡µé¢ä¸Šæœ‰å¤šä¸ªæ ·å¼å®ä¾‹ã€‚

å¦‚æœæ‚¨åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„è­¦å‘Šæ¶ˆæ¯ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½å·²ç»åœ¨é¡µé¢ä¸Šåˆå§‹åŒ–äº†å¤šä¸ª `@material-ui/styles` å®ä¾‹ã€‚

> çœ‹èµ·æ¥åœ¨è¿™ä¸ªåº”ç”¨ç¨‹åºä¸­åˆå§‹åŒ–äº†å¤šä¸ª `@material-ui/styles` å®ä¾‹ã€‚ è¿™å¯èƒ½ä¼šå¯¼è‡´ä¸»é¢˜ä¼ æ’­é—®é¢˜ã€ç±»åç§°æŸåã€ä¸“ä¸€æ€§é—®é¢˜ï¼Œå¹¶ä½¿ä½ çš„åº”ç”¨ç¨‹åºå°ºå¯¸æ— ç«¯å˜å¤§ã€‚ 

### å¯èƒ½çš„åŸå› 

å‡ºç°è¿™äº›é—®é¢˜é€šå¸¸æœ‰å‡ ä¸ªå¸¸è§çš„åŸå› ï¼š

- åœ¨æ‚¨çš„ä¾èµ–å…³ç³»ä¸­è¿˜æœ‰ä¸€ä¸ª `@material-ui/styles` åº“ã€‚
- æ‚¨çš„é¡¹ç›®æ˜¯ monorepo ç»“æ„ï¼ˆä¾‹å¦‚ï¼Œlernaï¼Œyarn workspacesï¼‰ï¼Œå¹¶ä¸” `@material-ui/styles` æ¨¡å—æ˜¯å¤šä¸ªåŒ…ä¸­çš„ä¾èµ–ï¼ˆä¸å‰ä¸€ä¸ªåŒ…æˆ–å¤šæˆ–å°‘ç›¸åŒï¼‰ã€‚
- æ‚¨æœ‰å‡ ä¸ªä½¿ç”¨ `@material-ui/styles` çš„åº”ç”¨ç¨‹åºåœ¨åŒä¸€é¡µé¢ä¸Šè¿è¡Œï¼ˆä¾‹å¦‚ï¼Œwebpack ä¸­çš„å‡ ä¸ªå…¥å£ç‚¹è¢«åŠ è½½åœ¨åŒä¸€é¡µé¢ä¸Šï¼‰ã€‚

### åœ¨ node_modules ä¸­é‡å¤çš„æ¨¡å—ã€‚ 

å¦‚æœæ‚¨è®¤ä¸ºé—®é¢˜å¯èƒ½å‡ºç°åœ¨æ‚¨çš„ä¾èµ–å…³ç³»ä¸­çš„ @material-ui/styles æ¨¡å—çš„é‡å¤ï¼Œé‚£ä¹ˆæœ‰å‡ ç§æ–¹æ³•å¯ä»¥æ£€æŸ¥ã€‚ æ‚¨å¯ä»¥åœ¨åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹ä¸­ä½¿ç”¨ `npm ls @material-ui/styles`ã€`yarn list @material-ui/styles` æˆ– `find -L ./node_modules | grep /@material-ui/styles/package.json` å‘½ä»¤æ¥è¿›è¡Œæ£€æŸ¥ã€‚

å¦‚æœä½¿ç”¨äº†è¿™äº›å‘½ä»¤ä¹‹åéƒ½æ²¡æœ‰å‘ç°é‡å¤çš„ä¾èµ–ï¼Œè¯·å°è¯•åˆ†ææ‚¨çš„æ†ç»‘åŒ…ä¸­æ˜¯å¦æœ‰å¤šä¸ª @material-ui/styles å®ä¾‹ã€‚ æ‚¨å¯ä»¥ç›´æ¥å»æ£€æŸ¥æ†ç»‘åŒ…çš„æºä»£ç ï¼Œæˆ–è€…ä½¿ç”¨ [source-map-explorer](https://github.com/danvk/source-map-explorer) æˆ– [webpack-bundle-analyzer](https://github.com/webpack-contrib/webpack-bundle-analyzer) è¿™æ ·çš„å·¥å…·æ¥å¸®åŠ©æ£€æŸ¥ã€‚

å¦‚æœæ‚¨ç¡®å®šå½“å‰é‡åˆ°çš„é—®é¢˜æ˜¯æ¨¡å—é‡å¤ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥å°è¯•è§£å†³ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š 

å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨çš„æ˜¯ npmï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥å°è¯•è¿è¡Œ `npm dedupe` å‘½ä»¤ã€‚ è¿™æ¡å‘½ä»¤å°†ä¼šæœç´¢æœ¬åœ°çš„ä¾èµ–å…³ç³»ï¼Œå¹¶è¯•å›¾é€šè¿‡å°†å…±åŒçš„ä¾èµ–å…³ç³»ç§»åˆ°æ ‘çš„æ›´ä¸Šå±‚æ¥ç®€åŒ–ç»“æ„ã€‚ 

å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ webpackï¼Œæ‚¨å¯ä»¥æ›´æ”¹ [è§£æ](https://webpack.js.org/configuration/resolve/#resolve-modules) @material-ui/styles æ¨¡å—çš„æ–¹å¼ã€‚ æ‚¨å¯ä»¥é€šè¿‡è¦†ç›– webpack æŸ¥æ‰¾ä¾èµ–é¡¹çš„é»˜è®¤é¡ºåºçš„æ–¹æ³•æ¥ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºä¸­çš„ node_modules æ¯”é»˜è®¤çš„ node è§£ææ¨¡å—é¡ºåºæ›´ä¼˜å…ˆè¿›è¡Œæ¸²æŸ“ã€‚ 

```diff
  resolve: {
+   alias: {
+     "@material-ui/styles": path.resolve(appFolder, "node_modules", "@material-ui/styles"),
+   }
  }
```

### å’Œ Learn ä¸€èµ·ä½¿ç”¨

å¦‚æœæ‚¨æƒ³è¦è®© @material-ui/styles åœ¨ Lerna monorepo ä¸­è·¨åŒ…è¿è¡Œï¼Œä¸€ä¸ªå¯èƒ½çš„ä¿®å¤æ–¹æ³•æ˜¯å°† [hoist](https://github.com/lerna/lerna/blob/master/doc/hoist.md) çš„å…±äº«ä¾èµ–é¡¹ç§»åŠ¨åˆ° monorepo æ–‡ä»¶çš„æ ¹éƒ¨ã€‚ æ‚¨å¯ä»¥å°è¯•ä½¿ç”¨ - -hoist æ ‡è¯†è¿è¡Œå¼•å¯¼é€‰é¡¹ã€‚ 

```sh
lerna bootstrap --hoist
```

å¦å¤–ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨ package.json æ–‡ä»¶ä¸­åˆ é™¤ @material-ui/styles é¡¹ï¼Œç„¶åæ‰‹åŠ¨å°†å®ƒç§»åŠ¨åˆ°é¡¶å±‚ package.json æ–‡ä»¶ä¸­ã€‚ 

Lerna æ ¹ç›®å½•ä¸‹çš„ package.json æ–‡ä»¶ç¤ºä¾‹ï¼š 

```json
{
  "name": "my-monorepo",
  "devDependencies": {
    "lerna": "latest"
  },
  "dependencies": {
    "@material-ui/styles": "^4.0.0"
  },
  "scripts": {
    "bootstrap": "lerna bootstrap",
    "clean": "lerna clean",
    "start": "lerna run start",
    "build": "lerna run build"
  }
}
```

### Running multiple applications on one page

If you have several applications running on one page, consider using one @material-ui/styles module for all of them. If you are using webpack, you can use [CommonsChunkPlugin](https://webpack.js.org/plugins/commons-chunk-plugin/) to create an explicit [vendor chunk](https://webpack.js.org/plugins/commons-chunk-plugin/#explicit-vendor-chunk), that will contain the @material-ui/styles module:

```diff
  module.exports = {
    entry: {
+     vendor: ["@material-ui/styles"],
      app1: "./src/app.1.js",
      app2: "./src/app.2.js",
    },
    plugins: [
+     new webpack.optimize.CommonsChunkPlugin({
+       name: "vendor",
+       minChunks: Infinity,
+     }),
    ]
  }
```

## æˆ‘çš„åº”ç”¨ç¨‹åºåœ¨æœåŠ¡å™¨ä¸Šæ²¡æœ‰æ­£ç¡®æ¸²æŸ“

If it doesn't work, in 99% of cases it's a configuration issue. A missing property, a wrong call order, or a missing component â€“ server-side rendering is strict about configuration, and the best way to find out what's wrong is to compare your project to an already working setup. Check out the [reference implementations](/guides/server-rendering/#reference-implementations), bit by bit.

### CSS works only on first load then is missing

The CSS is only generated on the first load of the page. Then, the CSS is missing on the server for consecutive requests.

#### è¦é‡‡å–çš„è¡ŒåŠ¨

The styling solution relies on a cache, the *sheets manager*, to only inject the CSS once per component type (if you use two buttons, you only need the CSS of the button one time). You need to create **a new `sheets` instance for each request**.

*example of fix:*

```diff
-// Create a sheets instance.
-const sheets = new ServerStyleSheets();

function handleRender(req, res) {

+ // Create a sheets instance.
+ const sheets = new ServerStyleSheets();

  //â€¦

  // Render the component to a string.
  const html = ReactDOMServer.renderToString(
```

### React class name hydration mismatch

There is a class name mismatch between the client and the server. It might work for the first request. Another symptom is that the styling changes between initial page load and the downloading of the client scripts.

#### è¦é‡‡å–çš„è¡ŒåŠ¨

The class names value relies on the concept of [class name generator](/styles/advanced/#class-names). The whole page needs to be rendered with **a single generator**. This generator needs to behave identically on the server and on the client. å°±åƒè¿™æ ·ï¼š

- You need to provide a new class name generator for each request. But you shouldn't share a `createGenerateClassName()` between different requests:

*example of fix:*

```diff
-  //åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»åç”Ÿæˆå™¨ã€‚
-const generateClassName = createGenerateClassName();

function handleRender(req, res) {

+ // åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»åç”Ÿæˆå™¨ã€‚
+ const generateClassName = createGenerateClassName();

  //â€¦

  // å°†ç»„ä»¶æ¸²æŸ“ä¸ºå­—ç¬¦ä¸²ã€‚
  const html = ReactDOMServer.renderToString(
```

- You need to verify that your client and server are running the **exactly the same version** of Material-UI. It is possible that a mismatch of even minor versions can cause styling problems. è¦æ£€æŸ¥ç‰ˆæœ¬å·ï¼Œè¯·åœ¨æ„å»ºåº”ç”¨ç¨‹åºçš„ç¯å¢ƒä¸­ä»¥åŠéƒ¨ç½²ç¯å¢ƒä¸­è¿è¡Œ `npm list @material-ui/core`ã€‚
  
    You can also ensure the same version in different environments by specifying a specific MUI version in the dependencies of your package.json.

*ä¿®å¤ç¤ºä¾‹ (package.jsonï¼‰ï¼š*

```diff
  "dependencies": {
    ...

-   "@material-ui/core": "^4.0.0",
+   "@material-ui/core": "4.0.0",
    ...
  },
```

- You need to make sure that the server and the client share the same `process.env.NODE_ENV` value.

## ä¸ºä»€ä¹ˆæˆ‘çš„åº”ç”¨ç¨‹åºçœ‹åˆ°çš„é¢œè‰²å’Œæ–‡æ¡£é‡Œçš„é¢œè‰²å¤§ç›¸å¾„åº­ï¼Ÿ

æ–‡æ¡£ç½‘ç«™ä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ä¸»é¢˜ã€‚ å› æ­¤ï¼Œè°ƒè‰²æ¿å’Œ Material-UI ä¼ æ’­çš„é»˜è®¤çš„ä¸»é¢˜æ˜¯æˆªç„¶ä¸åŒçš„ã€‚ è¯·å‚è€ƒ[è¿™é¡µ](/customization/theming/) æ¥äº†è§£è‡ªå®šä¹‰ä¸»é¢˜ã€‚

## ä¸ºä»€ä¹ˆç»„ä»¶X éœ€è¦ä¸€ä¸ª DOM èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯ ref å¯¹è±¡ï¼Ÿ

Components like the [Portal](/api/portal/#props) or [Popper](/api/popper/#props) require a DOM node in the `container` or `anchorEl` prop respectively. It seems convenient to simply pass a ref object in those props and let Material-UI access the current value. This works in a simple scenario:

```jsx
function App() {
  const container = React.useRef(null);

  return (
    <div className="App">
      <Portal container={container}>
        <span>portaled children</span>
      </Portal>
      <div ref={container} />
    </div>
  );
}
```

where `Portal` would only mount the children into the container when `container.current` is available. Here is a naive implementation of Portal:

```jsx
function Portal({ children, container }) {
  const [node, setNode] = React.useState(null);

  React.useEffect(() => {
    setNode(container.current);
  }, [container]);

  if (node === null) {
    return null;
  }
  return ReactDOM.createPortal(children, node);
}
```

With this simple heuristic `Portal` might re-render after it mounts because refs are up-to-date before any effects run. However, just because a ref is up-to-date doesn't mean it points to a defined instance. If the ref is attached to a ref forwarding component it is not clear when the DOM node will be available. In the example above, the `Portal` would run an effect once, but might not re-render because `ref.current` is still `null`. This is especially apparent for React.lazy components in Suspense. The above implementation could also not account for a change in the DOM node.

This is why we require a prop with the actual DOM node so that React can take care of determining when the `Portal` should re-render:

```jsx
function App() {
  const [container, setContainer] = React.useState(null);
  const handleRef = React.useCallback(instance => setContainer(instance), [setContainer])

  return (
    <div className="App">
      <Portal container={container}>
        <span>Portaled</span>
      </Portal>
      <div ref={handleRef} />
    </div>
  );
}
```

## clsx ä¾èµ–ä»€ä¹ˆï¼Ÿ

[clsx](https://github.com/lukeed/clsx) is a tiny utility for constructing `className` strings conditionally, out of an object with keys being the class strings, and values being booleans.

Instead of writing:

```jsx
// let disabled = false, selected = true;

return (
  <div
    className={`MuiButton-root ${disabled ? 'Mui-disabled' : ''} ${selected ? 'Mui-selected' : ''}`}
  />
);
```

ä½ å¯ä»¥è¿™æ ·åšï¼š

```jsx
import clsx from 'clsx';

return (
  <div
    className={clsx('MuiButton-root', {
      'Mui-disabled': disabled,
      'Mui-selected': selected,
    })}
  />
);
```